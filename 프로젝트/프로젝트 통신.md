![[Pasted image 20250616164553.png]]
## 🤔 **BFF 패턴을 쉽게 이해해보자!**

**주방, 바텐더, 디저트팀 = UserService, RecipeService, NutritionService**
### **실제 상황:**

1. **고객**: "스테이크 정식 주세요!"
2. **웨이터**: 주방에 "스테이크 1개!", 바텐더에 "와인 1잔!", 디저트팀에 "아이스크림 1개!" 전달
3. **각 팀**: 각자 맡은 일 처리
4. **웨이터**: 완성된 요리를 고객에게 서빙

## 🔍 **EasyCook에서는?**

### **실제 동작 과정:**

1. **사용자**: `https://easycook.dev.eris.go.kr/bookmarks` 접속
2. **Frontend Service**: "북마크 페이지구나! UserService야, 이 사용자 북마크 데이터 줘!"
3. **UserService**: 데이터베이스에서 북마크 조회 후 Frontend에 전달
4. **Frontend Service**: 받은 데이터를 예쁜 HTML 페이지로 만들어서 사용자에게 보여줌

## 💡 **왜 이렇게 하는가?**

### **✅ 사용자 입장:**

- **하나의 주소만 기억**: `easycook.dev.eris.go.kr`
- **일관된 디자인**: 모든 페이지가 같은 스타일
- **빠른 네비게이션**: 페이지 간 이동이 자연스러움

### **✅ 개발자 입장:**

- **보안**: 내부 서비스들이 외부에 노출되지 않음
- **유연성**: UserService를 바꿔도 사용자는 모름
- **통합 관리**: 인증, 권한을 Frontend에서 일괄 처리

## 🆚 **만약 BFF가 없다면?**

```
사용자가 알아야 할 주소들:
- 로그인: https://user.easycook.com/login
- 레시피 검색: https://recipe.easycook.com/search  
- 영양정보: https://nutrition.easycook.com/info
- 북마크: https://user.easycook.com/bookmarks

→ 복잡하고 관리하기 어려움! 😵
```

## 🎉 **결론**

**EasyCook의 BFF 패턴은 마치 훌륭한 웨이터처럼:**

- **고객(사용자)은 웨이터(Frontend Service)와만 대화**
- **웨이터가 뒤에서 모든 팀(마이크로서비스)과 조율**
- **고객은 복잡한 내부 과정을 몰라도 됨**
- **결과적으로 모두가 편리함!**

## EasyCook에서 실제로 어떻게 동작하나?

1 **사용자가 북마크 페이지 접속**  
https://easycook.dev.eris.go.kr/bookmarks

2 **Kong Gateway가 Frontend Service로 전달**  
"아, 이건 Frontend Service가 처리해야겠다!"

3 **Frontend Service가 HTML 페이지 반환**  
bookmarks.html 템플릿을 사용자에게 보여줌

4 **페이지에서 JavaScript가 데이터 요청**  
GET /api/bookmarks 호출

5 **Frontend Service가 UserService에 내부 호출**  
http://user-service:8082/api/bookmarks  


(Kubernetes 클러스터 내부에서만 가능!)

6 **UserService가 DB에서 데이터 조회 후 응답**  
Frontend Service → 사용자에게 JSON 데이터 전달

**🌐 외부에서 보는 관점:**
- 사용자는 https://easycook.dev.eris.go.kr/ 하나만 알면 됨
- 모든 기능이 이 하나의 주소에서 제공됨
- 북마크, 레시피, 영양정보 모두 같은 도메인

**🔧 내부에서 동작하는 방식:**
- Frontend Service가 모든 요청을 받음
- 필요에 따라 UserService, RecipeService, NutritionService 호출
- 결과를 조합해서 사용자에게 전달

**🎉 결과:**
- ✅ 사용자: 간단하고 일관된 경험
- ✅ 개발자: 내부 서비스를 자유롭게 변경 가능
- ✅ 운영자: 보안과 관리가 용이