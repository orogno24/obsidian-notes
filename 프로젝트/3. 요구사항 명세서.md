## Fruitables — 요구사항 명세서 (v1.0 · 2025-05-28)

> **목적** 이 문서는 _Fruitables_ 시스템이 반드시 충족해야 하는 기능·비기능 요구사항을 정의한다.  
> **범위** FruitCatalog, OrderManager, DeliveryMock 3개 마이크로서비스와 그 외 공통 인프라(Kong GW, RabbitMQ, PostgreSQL 등).

---

### 1. 용어‧약어

|용어|정의|
|---|---|
|**상품**|과일 1종(이름·가격·재고)|
|**주문**|사용자 1회 구매 행위|
|**배송 단계**|`READY → ON_ROUTE → DELIVERED`|
|**paymentToken**|모의 결제 토큰(형식: `tok_test_*`)|

---

### 2. 이해관계자 & 액터

|액터|설명|
|---|---|
|**사용자(Consumer)**|웹 UI로 상품 조회·주문|
|**시스템(Internal)**|서비스 간 재고 차감·배송 전이 동작|
|**관리자(Admin)**|초기 Seed 데이터 입력·재고 조정만 수행|

---

# ✅ Fruitables 프로젝트 요구사항 정의서 (기능 + 비기능 통합)

---

## 📦 기능 요구사항

### 👤 회원 관리

|요구사항 ID|업무분류|1차 분류|2차 분류|요구사항 설명|
|---|---|---|---|---|
|ACC-01|회원 > 농가 > 가입|S/W 요구사항|기능|농가 회원은 ID, PW, 농장명 등 입력 후 가입 요청을 보낼 수 있어야 한다|
|ACC-02|회원 > 농가 > 파일 업로드|S/W 요구사항|기능|가입 시 사업자등록증(PDF, JPG)을 파일로 첨부해야 한다|
|ACC-03|회원 > 농가 > 이메일 인증|S/W 요구사항|기능|이메일로 전송된 인증 링크 클릭 시 인증 완료 처리되어야 한다|
|ACC-04|회원 > 농가 > 승인|S/W 요구사항|기능|관리자는 미승인 농가 회원을 검토 후 승인/거절 처리할 수 있어야 한다|
|ACC-05|회원 > 소비자 > 일반 가입|S/W 요구사항|기능|소비자는 ID, 비밀번호, 이름, 휴대폰 정보를 입력해 가입할 수 있어야 한다|
|ACC-06|회원 > 공통 > 로그인|S/W 요구사항|기능|회원은 ID, 비밀번호로 로그인 후 JWT를 발급받아야 한다|
|ACC-07|회원 > 공통 > 계정 찾기|S/W 요구사항|기능|이름과 휴대폰으로 아이디를 찾고, 아이디 + 정보로 비밀번호 재설정이 가능해야 한다|
|ACC-08|회원 > 공통 > 탈퇴|S/W 요구사항|기능|소비자는 즉시 탈퇴 가능, 농가는 미배송 주문이 없어야 탈퇴가 가능해야 한다|
|ACC-09|회원 > 관리자 > 목록 조회|S/W 요구사항|기능|관리자는 전체 회원 목록을 검색/필터링하여 조회할 수 있어야 한다|

---

### 🍎 상품 관리

| 요구사항 ID | 업무분류       | 1차 분류    | 2차 분류 | 요구사항 설명                                            |
| ------- | ---------- | -------- | ----- | -------------------------------------------------- |
| CAT-01  | 상품 > 목록 조회 | S/W 요구사항 | 기능    | 사용자는 등록된 과일 상품 목록을 이름, 가격, 재고와 함께 조회할 수 있어야 한다     |
| CAT-02  | 상품 > 상세 조회 | S/W 요구사항 | 기능    | 사용자는 상품 클릭 시 상세 설명, 수량, 이미지, 판매자 정보를 확인할 수 있어야 한다  |
| CAT-03  | 상품 > 등록    | S/W 요구사항 | 기능    | 농가 회원은 상품명, 설명, 가격, 수량, 이미지를 등록하여 상품을 추가할 수 있어야 한다 |
| CAT-04  | 상품 > 수정    | S/W 요구사항 | 기능    | 농가 회원은 본인이 등록한 상품의 정보(가격, 설명 등)를 수정할 수 있어야 한다      |
| CAT-05  | 상품 > 삭제    | S/W 요구사항 | 기능    | 농가 회원은 본인이 등록한 상품을 삭제할 수 있어야 한다.                   |
| CAT-06  | 상품 > 재고 차감 | S/W 요구사항 | 데이터   | 주문 발생 시 해당 상품의 재고가 자동으로 차감되어야 한다                   |
| CAT-09  | 상품 > 판매 중단 | S/W 요구사항 | 기능    | 농가 회원은 상품의 판매 상태를 "판매 중" 또는 "판매 중지"로 전환할 수 있어야 한다. |

---

### 🛒 주문 관리

| 요구사항 ID | 업무분류       | 1차 분류    | 2차 분류 | 요구사항 설명                                    |
| ------- | ---------- | -------- | ----- | ------------------------------------------ |
| ORD-01  | 주문 > 생성    | S/W 요구사항 | 기능    | 소비자는 장바구니에서 원하는 과일과 수량을 선택해 주문을 생성 가능해야 한다 |
| ORD-02  | 주문 > 수정    | S/W 요구사항 | 기능    | READY 상태의 주문은 수량을 변경할 수 있어야 한다             |
| ORD-03  | 주문 > 취소    | S/W 요구사항 | 기능    | READY 상태일 경우 주문을 취소할 수 있어야 한다              |
| ORD-04  | 주문 > 목록 조회 | S/W 요구사항 | 기능    | 로그인한 사용자는 자신의 주문 내역을 조회할 수 있어야 한다          |
| ORD-05  | 주문 > 상세 조회 | S/W 요구사항 | 기능    | 주문 상세에서 상품명, 수량, 가격, 배송 상태를 확인할 수 있어야 한다   |

---

### 🚚 배송 관리

|요구사항 ID|업무분류|1차 분류|2차 분류|요구사항 설명|
|---|---|---|---|---|
|DLV-01|배송 > 시작 상태|S/W 요구사항|기능|주문이 생성되면 배송 상태는 READY로 초기화되어야 한다|
|DLV-02|배송 > 상태 전이|S/W 요구사항|기능|배송 상태는 READY → ON_ROUTE → DELIVERED 순으로 전이되어야 한다|
|DLV-03|배송 > 상태 확인|S/W 요구사항|기능|사용자는 자신의 주문 상세에서 배송 상태를 확인할 수 있어야 한다|

---

### 🧩 플랫폼 > 사용자 인터페이스(UI)

|요구사항 ID|업무분류|1차 분류|2차 분류|요구사항 설명|
|---|---|---|---|---|
|UI-01|UI > 홈 이동|S/W 요구사항|기능|모든 화면에서 HOME 버튼 클릭 시 메인 페이지로 이동해야 한다|
|UI-02|UI > 권한 접근 제한|S/W 요구사항|기능|관리자 권한이 없는 사용자는 관리자 페이지 접근 시 접근 불가 메시지를 받아야 한다|
|UI-03|UI > 로그인 리디렉션|S/W 요구사항|기능|로그인되지 않은 사용자가 제한된 페이지 접근 시 로그인 페이지로 리디렉션 되어야 한다|
|UI-04|UI > 자동 페이지 이동|S/W 요구사항|기능|회원가입, 주문 완료 등 주요 작업 후 결과 페이지 또는 홈으로 자동 이동되어야 한다|
|UI-05|UI > 입력 유효성 검증|S/W 요구사항|기능|필수 항목 누락 또는 유효성 오류 시 적절한 에러 메시지를 표시해야 한다|
|UI-06|UI > 상태 메시지 출력|S/W 요구사항|기능|로그인/주문 성공·실패 시 명확한 메시지를 사용자에게 제공해야 한다|
|UI-07|UI > 메뉴 하이라이트|S/W 요구사항|기능|현재 활성화된 메뉴는 시각적으로 구분되어야 하며 위치를 명확히 보여야 한다|

---

## 💡 비기능 요구사항

| 요구사항 ID | 업무분류           | 1차 분류   | 2차 분류 | 요구사항 설명                                          |
| ------- | -------------- | ------- | ----- | ------------------------------------------------ |
| NFR-01  | 시스템 > 성능       | 품질 요구사항 | 효율성   | 주요 화면은 2초 이내 로딩, API 응답 평균은 500ms 이하 유지          |
| NFR-02  | 시스템 > 오토스케일링   | 품질 요구사항 | 효율성   | HPA를 통해 CPU/메모리 사용량 기준으로 Pod 수를 자동 조절해야 한다       |
| NFR-03  | 사용자정보 > 보안     | 품질 요구사항 | 보안성   | 사용자 비밀번호는 복호화 불가능한 해시 알고리즘으로 저장되어야 한다            |
| NFR-04  | 사용자정보 > 개인정보보호 | 품질 요구사항 | 보안성   | 회원 탈퇴 후 개인정보는 즉시 물리적으로 삭제되어야 한다                  |
| NFR-05  | UI > 호환성       | 품질 요구사항 | 사용성   | Chrome, Safari, Edge 등에서 UI가 동일하게 작동해야 한다        |
| NFR-06  | 배포 자동화         | 품질 요구사항 | 유지보수성 | Jenkins + ArgoCD로 Git Push 후 10분 내 자동 배포되어야 한다   |
| NFR-07  | 로그 수집          | 품질 요구사항 | 신뢰성   | Loki 기반 로그 수집 시 timestamp/level/traceID를 포함해야 한다 |
| NFR-08  | API 문서화        | 품질 요구사항 | 사용성   | Swagger를 통해 전체 API가 문서화되어야 한다                    |
| NFR-09  | 서비스 간 통신       | 품질 요구사항 | 보안성   | Istio mTLS를 통해 서비스 간 통신이 암호화되어야 한다               |
| NFR-10  | 요청 추적          | 품질 요구사항 | 신뢰성   | Jaeger를 통해 전체 서비스 간 요청 흐름을 추적할 수 있어야 한다          |

