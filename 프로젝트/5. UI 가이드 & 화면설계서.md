# EasyCook 프로젝트 함수/매개변수 완전 명세서

## 🔍 **실제 코드 기반 정확한 분석**

---

## 📱 **NUTRITION SERVICE**

### **NutritionController** (REST API)

| 함수명                  | 매개변수                                                                                                                                                 | 반환타입                                      | HTTP | URL                         | 설명                 |
| -------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------- | ---- | --------------------------- | ------------------ |
| `searchNutrition`    | `String foodName` (optional)<br>`String makerName` (optional)<br>`String category` (optional)<br>`int page` (default: 1)<br>`int size` (default: 10) | `ResponseEntity<NutritionSearchResponse>` | GET  | `/api/nutrition/search`     | 다중 조건으로 영양성분 검색    |
| `getNutritionDetail` | `@PathVariable String foodCode`                                                                                                                      | `ResponseEntity<NutritionDTO>`            | GET  | `/api/nutrition/{foodCode}` | 식품코드로 영양성분 상세정보 조회 |
| `health`             | 없음                                                                                                                                                   | `ResponseEntity<String>`                  | GET  | `/api/nutrition/health`     | 서비스 헬스체크 엔드포인트     |

### **NutritionViewController** (View Rendering)

|함수명|매개변수|반환타입|HTTP|URL|설명|
|---|---|---|---|---|---|
|`showNutritionSearchPage`|`String foodName` (optional)<br>`int page` (default: 1)<br>`int size` (default: 10)<br>`Model model`|`String`|GET|`/nutrition`|영양정보 검색 페이지 렌더링|
|`getNutritionDetail`|`@PathVariable String foodCode`<br>`Model model`|`String`|GET|`/nutrition/detail/{foodCode}`|영양정보 상세 페이지 렌더링|

### **INutritionService** (Service Interface)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`searchByFoodName`|`String foodName`<br>`int pageNo`<br>`int numOfRows`|`NutritionSearchResponse`|식품명으로 영양성분 검색|
|`searchByMakerName`|`String makerName`<br>`int pageNo`<br>`int numOfRows`|`NutritionSearchResponse`|제조사명으로 영양성분 검색|
|`searchByCategory`|`String category`<br>`int pageNo`<br>`int numOfRows`|`NutritionSearchResponse`|카테고리별 영양성분 검색|
|`getNutritionDetail`|`String foodCode`|`NutritionDTO`|식품코드로 영양성분 상세 조회|
|`getNutritionByFoodCode`|`String foodCode`|`NutritionDTO`|식품코드로 영양성분 조회 (별도 메서드)|

### **NutritionService** (Service Implementation)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`searchByFoodName`|`String foodName`<br>`int pageNo`<br>`int numOfRows`|`NutritionSearchResponse`|식품명 검색 비즈니스 로직 구현|
|`searchByMakerName`|`String makerName`<br>`int pageNo`<br>`int numOfRows`|`NutritionSearchResponse`|제조사명 검색 비즈니스 로직 구현|
|`searchByCategory`|`String category`<br>`int pageNo`<br>`int numOfRows`|`NutritionSearchResponse`|카테고리 검색 비즈니스 로직 구현|
|`getNutritionDetail`|`String foodCode`|`NutritionDTO`|상세 조회 비즈니스 로직 구현|
|`getNutritionByFoodCode`|`String foodCode`|`NutritionDTO`|식품코드 조회 비즈니스 로직 구현|

### **NutritionApiClient** (External API Client)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`searchByFoodName`|`String serviceKey`<br>`String foodName`<br>`int pageNo`<br>`int numOfRows`<br>`String dataType`|`NutritionApiResponse`|외부 API 식품명 검색 호출|
|`searchByMakerName`|`String serviceKey`<br>`String makerName`<br>`int pageNo`<br>`int numOfRows`<br>`String dataType`|`NutritionApiResponse`|외부 API 제조사명 검색 호출|
|`searchByCategory`|`String serviceKey`<br>`String category`<br>`int pageNo`<br>`int numOfRows`<br>`String dataType`|`NutritionApiResponse`|외부 API 카테고리 검색 호출|

---

## 👤 **USER SERVICE**

### **UserInfoController** (User Management)

|함수명|매개변수|반환타입|HTTP|URL|설명|
|---|---|---|---|---|---|
|`signupForm`|`Model model`|`String`|GET|`/signup`|회원가입 폼 페이지 표시|
|`signup`|`@Valid @ModelAttribute("user") UserInfoDTO dto`<br>`BindingResult bindingResult`<br>`Model model`|`String`|POST|`/signup`|회원가입 처리 (유효성 검증 포함)|
|`loginForm`|`@RequestParam(required = false) String error`<br>`Model model`|`String`|GET|`/login`|로그인 폼 페이지 표시|
|`mainPage`|없음|`String`|GET|`/main`|메인 페이지 표시|

### **BookmarkController** (Bookmark Management)

|함수명|매개변수|반환타입|HTTP|URL|설명|
|---|---|---|---|---|---|
|`bookmarksPage`|`Authentication authentication`<br>`@RequestParam(required = false) String type`<br>`Model model`|`String`|GET|`/bookmarks`|북마크 페이지 렌더링. 타입별 필터링 지원|
|`addBookmark`|`@RequestBody BookmarkDTO bookmarkDTO`<br>`Authentication authentication`|`ResponseEntity<?>`|POST|`/api/bookmarks`|북마크 추가 API|
|`deleteBookmark`|`@PathVariable Long bookmarkId`<br>`Authentication authentication`|`ResponseEntity<?>`|DELETE|`/api/bookmarks/{bookmarkId}`|북마크 ID로 삭제 API|
|`deleteBookmarkByItemId`|`@PathVariable String itemId`<br>`Authentication authentication`|`ResponseEntity<?>`|DELETE|`/api/bookmarks/item/{itemId}`|아이템 ID로 북마크 삭제 API|
|`checkBookmark`|`@PathVariable String itemId`<br>`Authentication authentication`|`ResponseEntity<?>`|GET|`/api/bookmarks/check/{itemId}`|북마크 여부 확인 API|

### **IUserService** (User Service Interface)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`registerUser`|`UserInfoDTO userInfoDTO`|`UserInfoEntity`|사용자 등록|
|`findByUserId`|`String userId`|`UserInfoEntity`|사용자 ID로 조회|
|`existsByUserId`|`String userId`|`boolean`|사용자 ID 존재 여부 확인|

### **UserService** (User Service Implementation)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`registerUser`|`UserInfoDTO userInfoDTO`|`UserInfoEntity`|사용자 등록 비즈니스 로직 (중복 체크, 암호화)|
|`findByUserId`|`String userId`|`UserInfoEntity`|사용자 조회 비즈니스 로직|
|`existsByUserId`|`String userId`|`boolean`|사용자 존재 여부 확인|

### **IBookmarkService** (Bookmark Service Interface)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`addBookmark`|`BookmarkDTO bookmarkDTO`|`BookmarkDTO`|북마크 추가|
|`deleteBookmark`|`Long bookmarkId`<br>`String userId`|`void`|북마크 ID로 삭제|
|`deleteBookmarkByItemId`|`String userId`<br>`String itemId`|`void`|아이템 ID로 북마크 삭제|
|`getUserBookmarks`|`String userId`|`List<BookmarkDTO>`|사용자의 모든 북마크 조회|
|`getUserBookmarksByType`|`String userId`<br>`BookmarkEntity.BookmarkType bookmarkType`|`List<BookmarkDTO>`|사용자의 타입별 북마크 조회|
|`isBookmarked`|`String userId`<br>`String itemId`|`boolean`|북마크 여부 확인|

### **BookmarkServiceImpl** (Bookmark Service Implementation)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`addBookmark`|`BookmarkDTO bookmarkDTO`|`BookmarkDTO`|북마크 추가 구현 (중복 체크 포함)|
|`deleteBookmark`|`Long bookmarkId`<br>`String userId`|`void`|북마크 삭제 구현 (권한 체크 포함)|
|`deleteBookmarkByItemId`|`String userId`<br>`String itemId`|`void`|아이템별 북마크 삭제 구현|
|`getUserBookmarks`|`String userId`|`List<BookmarkDTO>`|사용자 북마크 전체 조회 (최신순 정렬)|
|`getUserBookmarksByType`|`String userId`<br>`BookmarkEntity.BookmarkType bookmarkType`|`List<BookmarkDTO>`|사용자 타입별 북마크 조회|
|`isBookmarked`|`String userId`<br>`String itemId`|`boolean`|북마크 여부 확인 구현|

### **CustomUserDetailsService** (Spring Security User Details)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`loadUserByUsername`|`String username`|`UserDetails`|Spring Security 사용자 로드|

---

## 🍳 **RECIPE SERVICE**

### **RecipeController** (REST API with Swagger Documentation)

|함수명|매개변수|반환타입|HTTP|URL|설명|
|---|---|---|---|---|---|
|`getRecipeList`|`@RequestParam(defaultValue = "1") int startIdx`<br>`@RequestParam(defaultValue = "20") int endIdx`|`ResponseEntity<List<RecipeDTO>>`|GET|`/api/recipes`|페이지네이션 지원 레시피 목록 조회|
|`getRecipeDetail`|`@PathVariable String recipeSeq`|`ResponseEntity<RecipeDTO>`|GET|`/api/recipes/{recipeSeq}`|레시피 일련번호로 상세정보 조회|
|`searchRecipe`|`@RequestParam String recipeName`<br>`@RequestParam(defaultValue = "1") int startIdx`<br>`@RequestParam(defaultValue = "20") int endIdx`|`ResponseEntity<List<RecipeDTO>>`|GET|`/api/recipes/search`|레시피명으로 검색|
|`searchRecipeByType`|`@RequestParam String recipeType`<br>`@RequestParam(defaultValue = "1") int startIdx`<br>`@RequestParam(defaultValue = "20") int endIdx`|`ResponseEntity<List<RecipeDTO>>`|GET|`/api/recipes/search/type`|요리종류별 레시피 검색|

### **IRecipeService** (Recipe Service Interface)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`getRecipeList`|`int startIdx`<br>`int endIdx`|`List<RecipeDTO>`|레시피 목록 조회|
|`getRecipeDetail`|`String recipeSeq`|`Optional<RecipeDTO>`|레시피 상세 조회|
|`searchRecipeByName`|`String recipeName`<br>`int startIdx`<br>`int endIdx`|`List<RecipeDTO>`|레시피명으로 검색|
|`searchRecipeByType`|`String recipeType`<br>`int startIdx`<br>`int endIdx`|`List<RecipeDTO>`|요리종류별 검색|

### **RecipeService** (Recipe Service Implementation)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`getRecipeList`|`int startIdx`<br>`int endIdx`|`List<RecipeDTO>`|레시피 목록 조회 비즈니스 로직|
|`getRecipeDetail`|`String recipeSeq`|`Optional<RecipeDTO>`|레시피 상세 조회 비즈니스 로직|
|`searchRecipeByName`|`String recipeName`<br>`int startIdx`<br>`int endIdx`|`List<RecipeDTO>`|레시피명 검색 비즈니스 로직|
|`searchRecipeByType`|`String recipeType`<br>`int startIdx`<br>`int endIdx`|`List<RecipeDTO>`|요리종류별 검색 비즈니스 로직|

---

## 🔐 **SECURITY & JWT**

### **JwtTokenProvider** (JWT Token Management)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`generateToken`|`Authentication authentication`|`String`|JWT 토큰 생성|
|`getUsernameFromToken`|`String token`|`String`|토큰에서 사용자명 추출|
|`validateToken`|`String token`|`boolean`|토큰 유효성 검증|
|`getExpirationDateFromToken`|`String token`|`Date`|토큰 만료일 추출|
|`isTokenExpired`|`String token`|`boolean`|토큰 만료 여부 확인|

### **JwtAuthenticationFilter** (JWT Authentication Filter)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`doFilterInternal`|`HttpServletRequest request`<br>`HttpServletResponse response`<br>`FilterChain filterChain`|`void`|JWT 토큰 인증 필터 처리|
|`getTokenFromRequest`|`HttpServletRequest request`|`String`|HTTP 요청에서 JWT 토큰 추출|

### **SecurityConfig** (Spring Security Configuration)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`filterChain`|`HttpSecurity http`|`SecurityFilterChain`|Spring Security 필터 체인 설정|
|`passwordEncoder`|없음|`PasswordEncoder`|비밀번호 암호화 인코더 빈 생성|
|`authenticationManager`|`AuthenticationConfiguration config`|`AuthenticationManager`|인증 매니저 빈 생성|

---

## 📊 **DTO & Entity Methods**

### **BookmarkDTO** (Record-based DTO)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`from`|`BookmarkEntity entity`|`BookmarkDTO`|Entity에서 DTO 변환 (static method)|
|`toEntity`|없음 (this 객체)|`BookmarkEntity`|DTO에서 Entity 변환|

### **UserInfoDTO** (Record-based DTO)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`userId()`|없음|`String`|사용자 ID getter|
|`password()`|없음|`String`|비밀번호 getter|
|`email()`|없음|`String`|이메일 getter|
|`name()`|없음|`String`|이름 getter|

### **NutritionSearchResponse** (Search Result DTO)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`empty`|없음|`NutritionSearchResponse`|빈 검색 결과 생성 (static method)|
|`getNutritions`|없음|`List<NutritionDTO>`|영양성분 목록 getter|
|`getTotalCount`|없음|`int`|전체 건수 getter|
|`getCurrentPage`|없음|`int`|현재 페이지 getter|
|`getTotalPages`|없음|`int`|전체 페이지 수 getter|
|`setMessage`|`String message`|`void`|메시지 setter|

---

## 🗄️ **Repository Methods**

### **UserInfoRepository** (JPA Repository)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`findByUserId`|`String userId`|`Optional<UserInfoEntity>`|사용자 ID로 조회|
|`existsByUserId`|`String userId`|`boolean`|사용자 ID 존재 여부|

### **BookmarkRepository** (JPA Repository)

|함수명|매개변수|반환타입|설명|
|---|---|---|---|
|`findByUserIdOrderByCreatedAtDesc`|`String userId`|`List<BookmarkEntity>`|사용자별 북마크 조회 (최신순)|
|`findByUserIdAndBookmarkTypeOrderByCreatedAtDesc`|`String userId`<br>`BookmarkEntity.BookmarkType bookmarkType`|`List<BookmarkEntity>`|사용자별 타입별 북마크 조회|
|`existsByUserIdAndItemId`|`String userId`<br>`String itemId`|`boolean`|북마크 존재 여부 확인|
|`deleteByUserIdAndItemId`|`String userId`<br>`String itemId`|`void`|사용자별 아이템별 북마크 삭제|

---

## 📝 **총 함수 개수 요약**

|**서비스**|**컨트롤러**|**서비스**|**레포지토리**|**보안/기타**|**총합**|
|---|---|---|---|---|---|
|**Nutrition**|5개|10개|-|-|**15개**|
|**User**|9개|9개|6개|-|**24개**|
|**Recipe**|4개|8개|-|-|**12개**|
|**Security**|-|-|-|8개|**8개**|
|**DTO/Entity**|-|-|-|10개|**10개**|
|**총계**|**18개**|**27개**|**6개**|**18개**|**69개**|

## 🎯 **주요 특징**

1. **완전한 RESTful API** 설계
2. **JWT 기반 무상태 인증** 시스템
3. **마이크로서비스 아키텍처** 적용
4. **Swagger/OpenAPI** 문서화
5. **Spring Security** 완전 통합
6. **JPA Repository** 패턴 활용
7. **DTO-Entity 분리** 설계
8. **유효성 검증** 및 **에러 처리**
9. **페이지네이션** 지원
10. **타입별 필터링** 기능