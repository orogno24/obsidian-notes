apiVersion: apps/v1
kind: Deployment
metadata:
  name: app-fe
  namespace: test-dev
  labels:
    app: app-fe
spec:
  replicas: 4
  selector:
    matchLabels:
      app: app-fe
  template:
    metadata:
      labels:
        app: app-fe
    spec:
      imagePullSecrets:
        - name: harbor-secret
      containers:
        - name: app-fe
          image: cicd.harbor.dev.eris.go.kr/test-app/front:0.0.8
          env:
            - name: JAEGER_AGENT_HOST
              value: "localhost"
            - name: JAEGER_AGENT_PORT
              value: "6831"
          ports:
            - containerPort: 8080
        - name: jaeger-agent
          image: cicd.harbor.dev.eris.go.kr/test-app/front:0.0.8
          args:
            - "--reporter.grpc.host-port=jaeger-prod-collector.observability:14250"
            - "--reporter.type=grpc"
          ports:
            - containerPort: 5775
              protocol: UDP
            - containerPort: 6831
              protocol: UDP
            - containerPort: 6832
              protocol: UDP
            - containerPort: 5778
              protocol: TCP
          resources:
            requests:
              memory: "128Mi"
              cpu: "50m"
            limits:
              memory: "128Mi"
              cpu: "50m"

apiVersion: v1
kind: Service
metadata:
  name: frontend-service
  namespace: test-dev
spec:
  selector:
    app: app-fe
  type: ClusterIP
  ports:
    - protocol: TCP
      port: 80
      targetPort: 8080



[app-test-fe](https://gitea.dev.eris.go.kr/git-ops/app-test-fe/src/branch/main "app-test-fe")/[dev](https://gitea.dev.eris.go.kr/git-ops/app-test-fe/src/branch/main/dev "dev")/frontend-service-canary.yaml

apiVersion: v1
kind: Service
metadata:
  name: frontend-service-canary
  namespace: test-dev
spec:
  selector:
    app: app-fe
  type: ClusterIP
  ports:
    - protocol: TCP
      port: 80
      targetPort: 8080