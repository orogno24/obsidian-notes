## InitContainers ê°œë…

InitContainersëŠ” íŒŒë“œì˜ ë©”ì¸ ì»¨í…Œì´ë„ˆê°€ ì‹œì‘ë˜ê¸° ì „ì— ì‹¤í–‰ë˜ëŠ” íŠ¹ìˆ˜í•œ ì»¨í…Œì´ë„ˆë¡œ, ì´ˆê¸°í™” ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

### ì¼ë°˜ ì»¨í…Œì´ë„ˆì™€ InitContainersì˜ ì°¨ì´ì 

|íŠ¹ì„±|ì¼ë°˜ ì»¨í…Œì´ë„ˆ|InitContainer|
|---|---|---|
|**ì‹¤í–‰ ì‹œì **|íŒŒë“œê°€ ì‹œì‘ë  ë•Œ ë™ì‹œì— ì‹¤í–‰|ë©”ì¸ ì»¨í…Œì´ë„ˆ ì „ì— ì‹¤í–‰|
|**ì‹¤í–‰ ë°©ì‹**|ë³‘ë ¬ì  ì‹¤í–‰|ìˆœì°¨ì  ì‹¤í–‰|
|**ì‹¤í–‰ ì™„ë£Œ**|í”„ë¡œì„¸ìŠ¤ê°€ ê³„ì† ì‹¤í–‰ë¨|ì‘ì—… ì™„ë£Œ í›„ ì¢…ë£Œ|
|**ì‹¤íŒ¨ ì‹œ ë™ì‘**|ì¬ì‹œì‘ ì •ì±…ì— ë”°ë¼ ì²˜ë¦¬|ì „ì²´ íŒŒë“œ ì¬ì‹œì‘|

> ğŸ’¡ **í•µì‹¬**: InitContainersëŠ” ì™„ë£Œë  ë•Œê¹Œì§€ ë©”ì¸ ì»¨í…Œì´ë„ˆì˜ ì‹œì‘ì„ ì°¨ë‹¨í•©ë‹ˆë‹¤. ëª¨ë“  InitContainersê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì–´ì•¼ ë©”ì¸ ì»¨í…Œì´ë„ˆê°€ ì‹œì‘ë©ë‹ˆë‹¤.

## InitContainers ì‚¬ìš© ëª©ì 

InitContainersëŠ” ë‹¤ìŒê³¼ ê°™ì€ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤:

1. **ì‚¬ì „ ì„¤ì • ì‘ì—…**
    - ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì— í•„ìš”í•œ ì„¤ì • íŒŒì¼ ìƒì„±
    - ê¶Œí•œ ì„¤ì • ë° ë””ë ‰í† ë¦¬ êµ¬ì¡° ì¤€ë¹„
    
2. **ì˜ì¡´ì„± í™•ì¸**
    - ì™¸ë¶€ ì„œë¹„ìŠ¤ ê°€ìš©ì„± í™•ì¸ (ë°ì´í„°ë² ì´ìŠ¤, API ì„œë²„ ë“±)
    - ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ê°€ ì¤€ë¹„ë  ë•Œê¹Œì§€ ëŒ€ê¸°
    
3. **ë¦¬ì†ŒìŠ¤ ì´ˆê¸°í™”**
    - ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜
    - ì´ˆê¸° ë°ì´í„° ë¡œë“œ
    
4. **ë³´ì•ˆ ì„¤ì •**
    - ì¸ì¦ì„œ ìƒì„± ë˜ëŠ” ê°€ì ¸ì˜¤ê¸°
    - ë¹„ë°€ í‚¤ ì„¤ì •
    
5. **ì½”ë“œ ë˜ëŠ” ë°”ì´ë„ˆë¦¬ ì¤€ë¹„**
    - ì €ì¥ì†Œì—ì„œ ì½”ë“œ/ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ
    - ë¹Œë“œ ë˜ëŠ” ì»´íŒŒì¼ ì‘ì—… ìˆ˜í–‰

## InitContainers êµ¬ì„± ë°©ë²•

InitContainersëŠ” íŒŒë“œ ëª…ì„¸ì˜ `spec.initContainers` ì„¹ì…˜ì— ì •ì˜ë©ë‹ˆë‹¤:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: myapp-pod
  labels:
    app: myapp
spec:
  containers:  # ë©”ì¸ ì»¨í…Œì´ë„ˆ
  - name: myapp-container
    image: busybox:1.28
    command: ['sh', '-c', 'echo The app is running! && sleep 3600']
    
  initContainers:  # ì´ˆê¸°í™” ì»¨í…Œì´ë„ˆ
  - name: init-myservice
    image: busybox:1.28
    command: ['sh', '-c', 'git clone <some-repository-that-will-be-used-by-application> ; done;']
```

### ì—¬ëŸ¬ InitContainers ì‚¬ìš©í•˜ê¸°

ì—¬ëŸ¬ InitContainersë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: myapp-pod
  labels:
    app: myapp
spec:
  containers:
  - name: myapp-container
    image: busybox:1.28
    command: ['sh', '-c', 'echo The app is running! && sleep 3600']
    
  initContainers:
  - name: init-myservice  # ì²« ë²ˆì§¸ ì´ˆê¸°í™” ì»¨í…Œì´ë„ˆ
    image: busybox:1.28
    command: ['sh', '-c', 'until nslookup myservice; do echo waiting for myservice; sleep 2; done;']
    
  - name: init-mydb  # ë‘ ë²ˆì§¸ ì´ˆê¸°í™” ì»¨í…Œì´ë„ˆ (ì²« ë²ˆì§¸ê°€ ì™„ë£Œëœ í›„ ì‹¤í–‰)
    image: busybox:1.28
    command: ['sh', '-c', 'until nslookup mydb; do echo waiting for mydb; sleep 2; done;']
```

> âš ï¸ **ì£¼ì˜**: ì—¬ëŸ¬ InitContainersê°€ ìˆëŠ” ê²½ìš°, ìˆœì„œëŒ€ë¡œ í•˜ë‚˜ì”© ì‹¤í–‰ë©ë‹ˆë‹¤. ì´ì „ InitContainerê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì–´ì•¼ ë‹¤ìŒ InitContainerê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.

## InitContainers ì‘ë™ ë°©ì‹

### ì‹¤í–‰ ìˆœì„œ ë° ìƒëª…ì£¼ê¸°

1. íŒŒë“œê°€ ìƒì„±ë˜ë©´ InitContainersê°€ `spec.initContainers` ë°°ì—´ì— ë‚˜ì—´ëœ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.
2. ê° InitContainerëŠ” ë‹¤ìŒ InitContainerê°€ ì‹œì‘ë˜ê¸° ì „ì— ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
3. ëª¨ë“  InitContainersê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ë©´, ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë©”ì¸ ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.
4. ë§Œì•½ InitContainerê°€ ì‹¤íŒ¨í•˜ë©´, ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” íŒŒë“œì˜ ì¬ì‹œì‘ ì •ì±…ì— ë”°ë¼ íŒŒë“œë¥¼ ì¬ì‹œì‘í•©ë‹ˆë‹¤.

### ë©”ì¸ ì»¨í…Œì´ë„ˆì™€ì˜ ê´€ê³„

- InitContainersê°€ ì™„ë£Œë˜ê³  ì¢…ë£Œëœ í›„ì—ë„, ê·¸ ê²°ê³¼ë¬¼ì€ ë©”ì¸ ì»¨í…Œì´ë„ˆì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.
- ì£¼ë¡œ ê³µìœ  ë³¼ë¥¨ì„ í†µí•´ InitContainersì˜ ê²°ê³¼ë¬¼ì„ ë©”ì¸ ì»¨í…Œì´ë„ˆì— ì „ë‹¬í•©ë‹ˆë‹¤.

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: shared-volume-example
spec:
  containers:
  - name: main-app
    image: nginx
    volumeMounts:
    - name: shared-data
      mountPath: /usr/share/nginx/html
      
  initContainers:
  - name: content-creator
    image: busybox
    command: ['sh', '-c', 'echo "<h1>Hello from InitContainer</h1>" > /data/index.html']
    volumeMounts:
    - name: shared-data
      mountPath: /data
      
  volumes:
  - name: shared-data
    emptyDir: {}
```

## ì‹¤ì œ ì‚¬ìš© ì‚¬ë¡€

### 1. ì„œë¹„ìŠ¤ ì˜ì¡´ì„± í™•ì¸

```yaml
initContainers:
- name: wait-for-database
  image: busybox
  command: ['sh', '-c', 'until nc -z mysql-service 3306; do echo waiting for mysql; sleep 2; done;']
```

### 2. ì„¤ì • íŒŒì¼ ìƒì„± ë˜ëŠ” ìˆ˜ì •

```yaml
initContainers:
- name: config-generator
  image: busybox
  command: ['sh', '-c', 'cat /template/nginx.conf.template | sed "s/{{SERVER_NAME}}/$SERVER_NAME/g" > /config/nginx.conf']
  env:
  - name: SERVER_NAME
    value: "example.com"
  volumeMounts:
  - name: template-volume
    mountPath: /template
  - name: config-volume
    mountPath: /config
```

### 3. ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜

```yaml
initContainers:
- name: run-migrations
  image: my-app-migrations
  command: ['sh', '-c', 'python manage.py migrate']
  env:
  - name: DATABASE_URL
    valueFrom:
      secretKeyRef:
        name: db-secrets
        key: url
```

### 4. ê¶Œí•œ ì„¤ì •

```yaml
initContainers:
- name: set-permissions
  image: busybox
  command: ['sh', '-c', 'chmod -R 777 /data']
  volumeMounts:
  - name: app-data
    mountPath: /data
```

### 5. ì¸ì¦ì„œ ë° ë¹„ë°€ ì¤€ë¹„

```yaml
initContainers:
- name: fetch-certificates
  image: cert-fetcher
  command: ['sh', '-c', '/scripts/fetch-certs.sh']
  volumeMounts:
  - name: cert-volume
    mountPath: /certs
  - name: scripts-volume
    mountPath: /scripts
```

## ëª¨ë²” ì‚¬ë¡€ ë° ì£¼ì˜ì‚¬í•­

### ëª¨ë²” ì‚¬ë¡€

1. **ëª…í™•í•œ ëª©ì ìœ¼ë¡œ ì‚¬ìš©**: InitContainersëŠ” ì´ˆê¸°í™” ì‘ì—…ì—ë§Œ ì‚¬ìš©í•˜ê³ , ì§€ì†ì ì¸ í”„ë¡œì„¸ìŠ¤ëŠ” ì‚¬ì´ë“œì¹´ ì»¨í…Œì´ë„ˆë¡œ êµ¬í˜„
2. **ê²½ëŸ‰ ì´ë¯¸ì§€ ì‚¬ìš©**: ì´ˆê¸°í™” ì‘ì—…ì— í•„ìš”í•œ ìµœì†Œí•œì˜ ë„êµ¬ë§Œ í¬í•¨ëœ ê²½ëŸ‰ ì´ë¯¸ì§€ ì‚¬ìš©
3. **ì ì ˆí•œ ë¦¬ì†ŒìŠ¤ ì„¤ì •**: InitContainersì—ë„ ë¦¬ì†ŒìŠ¤ ìš”ì²­ ë° ì œí•œ ì„¤ì •
4. **ì˜¤ë¥˜ ì²˜ë¦¬**: ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ì— ì ì ˆí•œ ì˜¤ë¥˜ ì²˜ë¦¬ ë° ë¡œê¹… êµ¬í˜„
5. **íƒ€ì„ì•„ì›ƒ ê´€ë¦¬**: ë¬´í•œ ëŒ€ê¸° ìƒí™©ì„ í”¼í•˜ê¸° ìœ„í•´ íƒ€ì„ì•„ì›ƒ ì„¤ì •

### ì£¼ì˜ì‚¬í•­

1. **íŒŒë“œ ì¬ì‹œì‘**: InitContainer ì‹¤íŒ¨ ì‹œ íŒŒë“œ ì „ì²´ê°€ ì¬ì‹œì‘ë¨ì„ ì¸ì§€
2. **ìˆœì„œ ì˜ì¡´ì„±**: ì—¬ëŸ¬ InitContainersë¥¼ ì‚¬ìš©í•  ë•Œ ìˆœì„œ ì˜ì¡´ì„± ê³ ë ¤
3. **ë””ë²„ê¹… ì–´ë ¤ì›€**: InitContainersëŠ” ì™„ë£Œ í›„ ì¢…ë£Œë˜ë¯€ë¡œ ë””ë²„ê¹…ì´ ì–´ë ¤ìš¸ ìˆ˜ ìˆìŒ
4. **ë¦¬ì†ŒìŠ¤ ì‚¬ìš©**: ì‹¤í–‰ì´ ì™„ë£Œëœ í›„ì—ë„ InitContainersì˜ ì´ë¯¸ì§€ëŠ” ë…¸ë“œì— ë‚¨ì•„ìˆìŒ
5. **ë„¤íŠ¸ì›Œí¬ ì •ì±…**: í•„ìš”í•œ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì´ í—ˆìš©ë˜ëŠ”ì§€ í™•ì¸

## ìš”ì•½

- InitContainersëŠ” ë©”ì¸ ì»¨í…Œì´ë„ˆ ì‹œì‘ ì „ì— ì‹¤í–‰ë˜ëŠ” íŠ¹ìˆ˜í•œ ì»¨í…Œì´ë„ˆ
- ì´ˆê¸°í™”, ì˜ì¡´ì„± í™•ì¸, ì‚¬ì „ ì„¤ì • ë“±ì˜ ì‘ì—…ì— ì‚¬ìš©
- ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©°, ëª¨ë‘ ì„±ê³µí•´ì•¼ ë©”ì¸ ì»¨í…Œì´ë„ˆ ì‹œì‘
- ê³µìœ  ë³¼ë¥¨ì„ í†µí•´ ë©”ì¸ ì»¨í…Œì´ë„ˆì™€ ë°ì´í„° ê³µìœ  ê°€ëŠ¥
- íŒŒë“œ ì¬ì‹œì‘ ì •ì±…ì— ë”°ë¼ ì‹¤íŒ¨ ì‹œ ì „ì²´ íŒŒë“œ ì¬ì‹œì‘
