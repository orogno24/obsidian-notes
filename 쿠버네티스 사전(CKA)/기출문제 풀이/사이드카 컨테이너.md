:wq![[Pasted image 20250523093719.png]]

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: mc-pod
  namespace: mc-namespace
  labels:
    run: mc-pod
spec:
  volumes:
    - name: data
      emptyDir: {}
  containers:
    - name: mc-pod-1
      image: nginx:1-alpine
      env:
        - name: NODE_NAME
          valueFrom:
            fieldRef:
              fieldPath: spec.nodeName
    - name: mc-pod-2
      image: busybox:1
      command: ["sh", "-c", "while true; do date >> /var/log/shared/date.log; sleep 1; done"]
      volumeMounts:
        - name: data
          mountPath: /var/log/shared
    - name: mc-pod-3
      image: busybox:1
      command: ["sh", "-c", "tail -F /var/log/shared/date.log"]
      volumeMounts:
        - name: data
          mountPath: /var/log/shared
  dnsPolicy: ClusterFirst
  restartPolicy: Always
```

**🔹 컨테이너들의 관점:**

|볼륨 타입|범위|생명주기|
|---|---|---|
|`emptyDir`|Pod 내부|Pod와 동일|
|`hostPath`|노드 전체|노드와 동일|
|`persistentVolume`|클러스터 전체|독립적|
## 확인 방법

- **emptyDir 볼륨의 루트**를 컨테이너의 `/var/log/shared`에 **연결**
- 컨테이너는 실제로는 노드의 emptyDir을 보고 있는 것
- `mc-pod-2`: 자신의 `/var/log/shared/date.log`에 쓰기 → 실제로는 노드의 파일에 쓰기
- `mc-pod-3`: 자신의 `/var/log/shared/date.log`에서 읽기 → 실제로는 같은 노드 파일에서 읽기
- `emptyDir: {}`파드 바깥(노드 디스크)에 있지만, **파드와 생명주기가 동일**

```yaml
volumes:                    # 📦 창고 만들기 (파드 바깥, 노드에)
  - name: data             # 창고 이름표: "data"
    emptyDir: {}           # 빈 창고 하나 만들어줘

volumeMounts:              # 🔑 창고 접근 열쇠 만들기
  - name: data             # "data" 창고에 접근하고 싶어
    mountPath: /var/log/shared  # 내 방 안의 "/var/log/shared" 문으로 연결해줘
```