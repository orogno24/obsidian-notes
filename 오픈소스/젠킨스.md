## ğŸš€ Jenkins ê¸°ë³¸ ì„¤ì¹˜

### 1. Helmì„ í†µí•œ Jenkins ì„¤ì¹˜

#### ì €ì¥ì†Œ ì¶”ê°€ ë° values.yaml ìƒì„±

```bash
# Jenkins Helm ì €ì¥ì†Œ ì¶”ê°€
helm repo add jenkins https://charts.jenkins.io
helm repo update

# ê¸°ë³¸ values.yaml íŒŒì¼ ìƒì„±
helm show values jenkins/jenkins > values.yaml
```

#### values.yaml ì£¼ìš” ì„¤ì •

```yaml
controller:
  adminPassword: your-strong-password
  serviceType: ClusterIP  # Ingress ì‚¬ìš©ìœ¼ë¡œ NodePort ë¶ˆí•„ìš”
  ingress:
    enabled: false        # ìˆ˜ë™ìœ¼ë¡œ Ingress ìƒì„± ì˜ˆì •
  resources:
    requests:
      cpu: "500m"
      memory: "1Gi"
    limits:
      cpu: "1"
      memory: "2Gi"
  installPlugins:
    - kubernetes:latest
    - workflow-aggregator:latest
    - git:latest
    - configuration-as-code:latest
```

#### Jenkins ì„¤ì¹˜ ì‹¤í–‰

```bash
helm install jenkins jenkins/jenkins -n op-gitops -f values.yaml
```

### 2. ì´ˆê¸° ì„¤ì •

#### ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ í™•ì¸

```bash
kubectl exec --namespace op-gitops -it svc/jenkins -c jenkins -- \
  /bin/cat /run/secrets/additional/chart-admin-password && echo
```

#### Self-Signed TLS ì¸ì¦ì„œ ìƒì„±

```bash
openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
  -keyout jenkins-tls.key -out jenkins-tls.crt \
  -subj "/CN=jenkins.dev.gcp.go.kr/O=jenkins"

kubectl create secret tls jenkins-tls \
  --cert=jenkins-tls.crt \
  --key=jenkins-tls.key \
  -n op-gitops
```

### 3. Ingress ì„¤ì •

```yaml
# jenkins-ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: jenkins-ingress
  namespace: op-gitops
  annotations:
    nginx.ingress.kubernetes.io/proxy-body-size: "1024m"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
spec:
  ingressClassName: nginx
  rules:
  - host: jenkins.dev.gcp.go.kr
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: jenkins
            port:
              number: 8080
  tls:
  - hosts:
    - jenkins.dev.gcp.go.kr
    secretName: jenkins-tls
```

```bash
kubectl apply -f jenkins-ingress.yaml
```

---

## âš™ï¸ Pod Template ì„¤ì •

### Jenkins ê´€ë¦¬ í™”ë©´ì—ì„œ ì„¤ì •

**ê²½ë¡œ**: Dashboard > Jenkins ê´€ë¦¬ > Clouds > kubernetes > Pod templates

### ê¸°ë³¸ Pod Template êµ¬ì„±

#### 1. ê¸°ë³¸ ì„¤ì •

- **Name**: `test`
- **Namespace**: `op-gitops`
- **Labels**: `test-label`
- **Usage**: Only build jobs with label expressions matching this node

#### 2. JNLP Container ì„¤ì •

```yaml
Name: jnlp
Docker image: jenkins/inbound-agent:latest
Working directory: /home/jenkins/agent
Command to run: (ë¹„ì›Œë‘ )
Arguments to pass to the command: ${computer.jnlpmac} ${computer.name}
```

**í™˜ê²½ë³€ìˆ˜:**

- `JENKINS_URL`: `http://jenkins.op-gitops.svc.cluster.local:8080/`
- `DOCKER_HOST`: `tcp://localhost:2375`

#### 3. Docker-in-Docker Container ì„¤ì •

```yaml
Name: docker-dind
Docker image: docker:dind
Working directory: /home/jenkins/agent
Command to run: dockerd
Arguments to pass to the command: --insecure-registry=harbor-core.op-common.svc.cluster.local:80 --insecure-registry=harbor.oke.com:30191
```

**í™˜ê²½ë³€ìˆ˜:**

- `DOCKER_TLS_CERTDIR`: `""` (ë¹ˆ ê°’)

**ê³ ê¸‰ ì„¤ì •:**

- âœ… **Run in privileged mode** ì²´í¬

---

## ğŸ”— ë„¤íŠ¸ì›Œí¬ ì„¤ì • (Harbor ì—°ë™)

### CoreDNS ì„¤ì •ìœ¼ë¡œ ë‚´ë¶€ DNS í•´ê²°

```bash
# CoreDNS ConfigMap ìˆ˜ì •
kubectl edit cm coredns -n kube-system
```

```yaml
# hosts ì„¹ì…˜ ì¶”ê°€
hosts {
   10.178.0.3 harbor.oke.com  # ë§ˆìŠ¤í„° ë…¸ë“œ IP, ë„ë©”ì¸ ì´ë¦„ ì¶”ê°€
   fallthrough
}
```

```bash
# CoreDNS ì¬ì‹œì‘
kubectl rollout restart deployment coredns -n kube-system
```

> ğŸ’¡ **ì¤‘ìš”**: ì¿ ë²„ë„¤í‹°ìŠ¤ íŒŒë“œëŠ” ë…¸ë“œì˜ `/etc/hosts`ê°€ ì•„ë‹Œ **CoreDNS ì„œë²„**ë¥¼ í†µí•´ í˜¸ìŠ¤íŠ¸ ì´ë¦„ì„ í•´ì„í•˜ë¯€ë¡œ, CoreDNS ì„¤ì • ë³€ê²½ì´ í•„ìš”í•©ë‹ˆë‹¤.

---

## ğŸ”§ ë¹Œë“œ íŒŒì´í”„ë¼ì¸ êµ¬ì„±

### 1. íŒŒì´í”„ë¼ì¸ Job ìƒì„±

#### ë¹Œë“œ ë§¤ê°œë³€ìˆ˜ ì„¤ì •

- **"ì´ ë¹Œë“œëŠ” ë§¤ê°œë³€ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤"** ì˜µì…˜ ì„ íƒ
- ë§¤ê°œë³€ìˆ˜ ì¶”ê°€: **Git Parameter**
    - **Name**: `SELECTED_TAG`
    - **Description**: `ë¹Œë“œí•  Git íƒœê·¸ë¥¼ ì„ íƒí•˜ì„¸ìš”`
    - **Default Value**: `latest`

#### Pipeline Script ì„¤ì •

- **Pipeline script from SCM** ì„ íƒ
- **SCM**: `Git`
- **Repository URL**: `http://gitea-http.op-gitops.svc:3000/pipeline/jenkins.git`
- **Credentials**: `git Credentials` ì„ íƒ
- **Branch Specifier**: `origin/main`
- **Script Path**: `eris-fe/build/Jenkinsfile`

### 2. ë¹Œë“œ íŒŒì´í”„ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸ ì˜ˆì‹œ

```groovy
def runBuildPipeline() {
    // ğŸ”§ Docker ì´ë¯¸ì§€ URL ì¬ê³„ì‚°
    env.DOCKER_IMAGE_URL = "${env.DOCKER_REGISTRY_HOST}/${env.DOCKER_PROJECT_NAME}/${env.DOCKER_IMAGE_NAME}"

    stage('Checkout') {
        checkout([
            $class: 'GitSCM',
            userRemoteConfigs: [[
                url: env.GIT_URL,
                credentialsId: env.GIT_CREDENTIALS_ID,
                refspec: '+refs/tags/*:refs/remotes/origin/tags/*'
            ]],
            branches: [[name: "refs/tags/${params.SELECTED_TAG}"]]
        ])
        env.APP_VERSION = params.SELECTED_TAG
        echo "âœ… ì„ íƒí•œ íƒœê·¸ë¡œ ì²´í¬ì•„ì›ƒ ì™„ë£Œ: ${env.APP_VERSION}"
    }

    stage('Build') {
        sh 'chmod +x gradlew'
        sh './gradlew clean assemble --no-daemon'
        echo "âœ… Gradle ë¹Œë“œ ì™„ë£Œ"
    }

    stage('Test') {
        sh './gradlew test --no-daemon'
        junit '**/build/test-results/test/*.xml'
        echo "âœ… í…ŒìŠ¤íŠ¸ ì™„ë£Œ"
    }

    stage('Docker Build & Push') {
        container('docker-dind') {
            withCredentials([usernamePassword(
                credentialsId: env.DOCKER_REGISTRY_CREDENTIALS_ID,
                usernameVariable: 'DOCKER_USER',
                passwordVariable: 'DOCKER_PASS'
            )]) {
                echo "ğŸ” Docker ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ë¡œê·¸ì¸ ì¤‘: ${env.DOCKER_REGISTRY_HOST}"
                sh """
                    echo "\$DOCKER_PASS" | docker login ${env.DOCKER_REGISTRY_HOST} -u "\$DOCKER_USER" --password-stdin
                    docker build -t ${env.DOCKER_IMAGE_URL}:${env.APP_VERSION} .
                    docker tag ${env.DOCKER_IMAGE_URL}:${env.APP_VERSION} ${env.DOCKER_IMAGE_URL}:latest
                    docker push ${env.DOCKER_IMAGE_URL}:${env.APP_VERSION}
                    docker push ${env.DOCKER_IMAGE_URL}:latest
                """
                echo "âœ… Docker ì´ë¯¸ì§€ í‘¸ì‹œ ì™„ë£Œ: ${env.DOCKER_IMAGE_URL}:${env.APP_VERSION}"
            }
        }
    }

    stage('Git Manifest Push') {
        git(
            url: env.GITOPS_URL,
            branch: env.GITOPS_BRANCH,
            credentialsId: env.GITOPS_CREDENTIALS_ID
        )

        dir(env.GITOPS_DIR) {
            def currentVersion = sh(
                script: "grep -A1 'name: ${env.GITOPS_CONTAINER_NAME}' deployment.yaml | grep 'image:' | awk -F ':' '{print \$NF}'",
                returnStdout: true
            ).trim()

            echo "ğŸ“¦ í˜„ì¬ ë°°í¬ ì¤‘ì¸ ë²„ì „: ${currentVersion}"
            echo "ğŸš€ ìƒˆë¡œ ë°°í¬í•  ë²„ì „: ${env.APP_VERSION}"

            if (currentVersion != env.APP_VERSION) {
                echo "ğŸ”„ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ ì‹œì‘"
                sh """
                    sed -i "/name: ${env.GITOPS_CONTAINER_NAME}/{n;s|image: .*|image: ${env.DOCKER_IMAGE_URL}:${env.APP_VERSION}|}" deployment.yaml
                    git config --global user.email "jenkins@okestro.com"
                    git config --global user.name "jenkins"
                    git add deployment.yaml
                    git commit -m "Update ${env.GITOPS_CONTAINER_NAME} image to ${env.APP_VERSION}"
                """

                withCredentials([usernamePassword(
                    credentialsId: env.GITOPS_CREDENTIALS_ID,
                    usernameVariable: 'GITOPS_USERNAME',
                    passwordVariable: 'GITOPS_PASSWORD'
                )]) {
                    sh "git push http://\${GITOPS_USERNAME}:\${GITOPS_PASSWORD}@${env.GITOPS_PATH} ${env.GITOPS_BRANCH}"
                }

                echo "âœ… GitOps ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ ì™„ë£Œ"
            } else {
                echo "â© ì´ë¯¸ì§€ ë²„ì „ì´ ë™ì¼í•˜ì—¬ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ ìƒëµ"
            }
        }
    }
}

return this
```

### ë¹Œë“œ íŒŒì´í”„ë¼ì¸ í”Œë¡œìš°

|ë‹¨ê³„|ì„¤ëª…|ê²°ê³¼ë¬¼|
|---|---|---|
|**1. ë³€ìˆ˜ ê³„ì‚°**|Docker ì´ë¯¸ì§€ ê²½ë¡œë¥¼ env ê¸°ë°˜ìœ¼ë¡œ ê³„ì‚°|ì´ë¯¸ì§€ URL ì„¤ì •|
|**2. Git íƒœê·¸ ì²´í¬ì•„ì›ƒ**|ì‚¬ìš©ìê°€ ì„ íƒí•œ íƒœê·¸ë¡œ ì†ŒìŠ¤ ê°€ì ¸ì˜¤ê¸°|ì†ŒìŠ¤ ì½”ë“œ|
|**3. ë¹Œë“œ**|Gradleë¡œ jar ìƒì„±|ì‹¤í–‰ ê°€ëŠ¥í•œ jar|
|**4. í…ŒìŠ¤íŠ¸**|Gradleë¡œ JUnit ì‹¤í–‰, ê²°ê³¼ ë³´ê³ |í…ŒìŠ¤íŠ¸ ê²°ê³¼|
|**5. Docker ì´ë¯¸ì§€ ìƒì„±/í‘¸ì‹œ**|ë¹Œë“œí•œ ì•±ì„ Dockerë¡œ ë§Œë“¤ê³  ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— í‘¸ì‹œ|Docker ì´ë¯¸ì§€|
|**6. GitOps ë°°í¬ íŒŒì¼ ìˆ˜ì •**|deployment.yamlì—ì„œ image: ê°’ì„ ìƒˆ ë²„ì „ìœ¼ë¡œ ë³€ê²½|ì—…ë°ì´íŠ¸ëœ ë§¤ë‹ˆí˜ìŠ¤íŠ¸|
|**7. Git ì»¤ë°‹ + í‘¸ì‹œ**|GitOps ì €ì¥ì†Œì— í‘¸ì‹œ â†’ ìë™ ë°°í¬ ìœ ë°œ|ë°°í¬ íŠ¸ë¦¬ê±°|

---

## â†©ï¸ ë¡¤ë°± íŒŒì´í”„ë¼ì¸ êµ¬ì„±

### 1. ë¡¤ë°± Job ìƒì„±

#### ë¹Œë“œ ë§¤ê°œë³€ìˆ˜ ì„¤ì •

- **"ì´ ë¹Œë“œëŠ” ë§¤ê°œë³€ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤"** ì˜µì…˜ ì„ íƒ
- ë§¤ê°œë³€ìˆ˜ ì¶”ê°€: **Git Parameter**
    - **Name**: `SELECTED_TAG`
    - **Description**: `ë¡¤ë°±í•  Git íƒœê·¸ë¥¼ ì„ íƒí•˜ì„¸ìš”`
    - **Default Value**: `latest`

#### Pipeline Script ì„¤ì •

- **Pipeline script from SCM** ì„ íƒ
- **Repository URL**: `http://gitea-http.op-gitops.svc:3000/pipeline/jenkins.git`
- **Script Path**: `eris-fe/rollback/Jenkinsfile`

### 2. ë¡¤ë°± íŒŒì´í”„ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸ ì˜ˆì‹œ

```groovy
def checkout() {
    echo "ğŸŸ¦ [Git Checkout] - ì‹œì‘"

    git(
        url: env.GIT_URL,
        branch: env.GIT_BRANCH,
        credentialsId: env.GIT_CREDENTIALS_ID
    )

    echo "âœ… [Git Checkout] - ì™„ë£Œ"
}

def gitOpsRollback() {
    echo "ğŸŸ¨ [GitOps Rollback] - ì‹œì‘"

    git(
        url: env.GITOPS_URL,
        branch: env.GITOPS_BRANCH,
        credentialsId: env.GITOPS_CREDENTIALS_ID
    )

    dir(env.GITOPS_DIR) {
        withCredentials([usernamePassword(
            credentialsId: env.GITOPS_CREDENTIALS_ID,
            passwordVariable: 'GITOPS_PASSWORD',
            usernameVariable: 'GITOPS_USERNAME'
        )]) {
            def currentVersion = sh(
                script: "grep 'image:' deployment.yaml | awk -F ':' '{print \$NF}' | head -n 1",
                returnStdout: true
            ).trim()

            echo "ğŸ” í˜„ì¬ ë°°í¬ ì¤‘ì¸ ì´ë¯¸ì§€ ë²„ì „: ${currentVersion}"
            echo "ğŸ¯ ë¡¤ë°±í•  ëŒ€ìƒ íƒœê·¸: ${params.SELECTED_TAG}"

            if (currentVersion != params.SELECTED_TAG) {
                echo "ğŸ”„ ë¡¤ë°±ì„ ì§„í–‰í•©ë‹ˆë‹¤. ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ${params.SELECTED_TAG} íƒœê·¸ë¡œ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."

                sh """
                    sed -i "/name: ${env.GITOPS_CONTAINER_NAME}/{n;s|image: .*|image: ${env.DOCKER_IMAGE_URL}:${params.SELECTED_TAG}|}" deployment.yaml
                    git config --global user.email "jenkins@okestro.com"
                    git config --global user.name "jenkins"
                    git add deployment.yaml
                    git commit -m "Rollback to image version: ${params.SELECTED_TAG}"
                    git push http://${GITOPS_USERNAME}:${GITOPS_PASSWORD}@${env.GITOPS_PATH} ${env.GITOPS_BRANCH}
                """

                echo "âœ… ë¡¤ë°± ì™„ë£Œ: ${params.SELECTED_TAG} íƒœê·¸ë¡œ ë°°í¬ íŒŒì¼ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤."
            } else {
                echo "â© í˜„ì¬ ë²„ì „ê³¼ ë™ì¼í•˜ì—¬ ë¡¤ë°±ì„ ê±´ë„ˆëœë‹ˆë‹¤."
            }
        }
    }

    echo "ğŸŸ© [GitOps Rollback] - ì¢…ë£Œ"
}

return this
```

### ë¡¤ë°± íŒŒì´í”„ë¼ì¸ í”Œë¡œìš°

|ê³¼ì •|ì„¤ëª…|ëª©ì |
|---|---|---|
|**1. íƒœê·¸ ì„ íƒ**|Jenkinsì—ì„œ ë¡¤ë°±í•  Git íƒœê·¸ë¥¼ ì„ íƒí•¨|ë³µì›í•  ë²„ì „ ì§€ì •|
|**2. í˜„ì¬ ìƒíƒœ í™•ì¸**|GitOps repoì—ì„œ í˜„ì¬ ë°°í¬ ë²„ì „ í™•ì¸|ì¤‘ë³µ ì‘ì—… ë°©ì§€|
|**3. ë³€ê²½ íŒë‹¨**|í˜„ì¬ì™€ ì„ íƒí•œ íƒœê·¸ê°€ ë‹¤ë¥´ë©´ ë¡¤ë°± ì§„í–‰|íš¨ìœ¨ì„± í™•ë³´|
|**4. ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ìˆ˜ì •**|`deployment.yaml`ì˜ ì´ë¯¸ì§€ íƒœê·¸ ë³€ê²½|ë¡¤ë°± ì‹¤í–‰|
|**5. Git push**|ìˆ˜ì •ëœ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ Gitì— í‘¸ì‹œ|GitOps íŠ¸ë¦¬ê±°|
|**6. ìë™ ë°°í¬**|ArgoCDê°€ ë³€ê²½ ê°ì§€ í›„ ìë™ ì¬ë°°í¬|ì‹¤ì œ ë¡¤ë°±|
|**7. ê²°ê³¼ ì¶œë ¥**|Jenkins ë¡œê·¸ë¡œ ì„±ê³µ ì—¬ë¶€ ì¶œë ¥|ìƒíƒœ í™•ì¸|

### ë¹Œë“œ vs ë¡¤ë°± íŒŒì´í”„ë¼ì¸ ë¹„êµ

|í•­ëª©|**ë¹Œë“œ íŒŒì´í”„ë¼ì¸**|**ë¡¤ë°± íŒŒì´í”„ë¼ì¸**|
|---|---|---|
|**ëª©ì **|ìƒˆë¡œìš´ ì´ë¯¸ì§€ ë¹Œë“œ ë° ë°°í¬|ê¸°ì¡´ ë¹Œë“œëœ ì´ë¯¸ì§€ë¡œ ì¬ë°°í¬|
|**Docker ì´ë¯¸ì§€**|ìƒˆë¡œ ë¹Œë“œí•¨|**ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë¯¸ì§€ë§Œ ì‚¬ìš©**|
|**GitOps ë§¤ë‹ˆí˜ìŠ¤íŠ¸**|ë¹Œë“œ í›„ ë³€ê²½|**ì„ íƒí•œ íƒœê·¸ë¡œë§Œ ì´ë¯¸ì§€ íƒœê·¸ êµì²´**|
|**ì†ë„**|ëŠë¦¼ (ë¹Œë“œ, í…ŒìŠ¤íŠ¸, í‘¸ì‹œ í¬í•¨)|**ë¹ ë¦„ (ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë§Œ ìˆ˜ì •)**|
|**ìœ„í—˜ì„±**|ë¹Œë“œì— ë”°ë¼ ì˜ˆê¸°ì¹˜ ëª»í•œ ë³€í™” ë°œìƒ ê°€ëŠ¥|**ì´ë¯¸ ê²€ì¦ëœ ì´ë¯¸ì§€ë§Œ ì‚¬ìš©í•˜ë¯€ë¡œ ì•ˆì •ì **|

---

## ğŸ” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### GitParameter ê´€ë ¨ ë¬¸ì œ

#### ì¦ìƒ

- GitParameterë¥¼ ì²˜ìŒ ì‚¬ìš©í•˜ë©´ "No Git repository configured" ì˜¤ë¥˜ ë°œìƒ
- ì¼ë°˜ íŒŒì´í”„ë¼ì¸ í•œ ë²ˆ ì‹¤í–‰ í›„ì—ëŠ” ê°‘ìê¸° ì •ìƒ ì‘ë™

#### ê¸°ìˆ ì  ì›ì¸

**ì²« ì ‘ê·¼ ì‹œ:**

- Jenkinsê°€ Git ì €ì¥ì†Œì— ì²˜ìŒ ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„
- ì¸ì¦ ì •ë³´, ë„¤íŠ¸ì›Œí¬ ì—°ê²°, ì €ì¥ì†Œ êµ¬ì¡° ë“±ì´ ì•„ì§ ì¤€ë¹„ë˜ì§€ ì•ŠìŒ
- GitParameterê°€ í•„ìš”í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í•¨

**ì¼ë°˜ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ í›„:**

- Git ì €ì¥ì†Œ ì ‘ê·¼ ë°©ë²•ì„ "í•™ìŠµ"
- ì¸ì¦ ì •ë³´ í™•ì¸ ì™„ë£Œ
- ì €ì¥ì†Œ êµ¬ì¡°ë¥¼ ìºì‹œì— ì €ì¥
- ë„¤íŠ¸ì›Œí¬ ê²½ë¡œ ìµœì í™”
- â†’ GitParameterê°€ í•„ìš”í•œ ì •ë³´ë¥¼ ì‰½ê²Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ

#### í•´ê²° ë°©ë²•

**1. ë‹¨ê³„ì  ì ‘ê·¼ë²• (ê¶Œì¥)**

1. ê°„ë‹¨í•œ íŒŒì´í”„ë¼ì¸ ë§Œë“¤ê¸° (GitParameter ì—†ì´)
2. í•œ ë²ˆ ì‹¤í–‰í•´ì„œ Git ì—°ê²° ì´ˆê¸°í™”í•˜ê¸°
3. GitParameter ì¶”ê°€í•˜ê¸°

**2. ì‚¬ì „ ì´ˆê¸°í™” ì½”ë“œ**

```groovy
stage('Git ì´ˆê¸°í™”') {
    steps {
        sh 'git ls-remote ${ì €ì¥ì†Œ_ì£¼ì†Œ}'
    }
}
```

**3. ì‹¤ë¬´ ê¶Œì¥ì‚¬í•­**

- ìƒˆ íŒŒì´í”„ë¼ì¸ ë§Œë“¤ ë•Œ ì²˜ìŒë¶€í„° ë³µì¡í•œ ê¸°ëŠ¥ ë„£ì§€ ì•Šê¸°
- ê°€ì¥ ê¸°ë³¸ì ì¸ í˜•íƒœë¡œ ë¨¼ì € ì‹¤í–‰í•´ë³´ê¸°
- ì„±ê³µ í™•ì¸ í›„ GitParameter ê°™ì€ ê³ ê¸‰ ê¸°ëŠ¥ ì¶”ê°€í•˜ê¸°

### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

#### Pod Template ì„¤ì • ê´€ë ¨

- **initializeOnce**: `false` â†’ `true`ë¡œ ë³€ê²½ í•„ìš”
- **ê²½ë¡œ**: Dashboard > Jenkins ê´€ë¦¬ > Clouds > kubernetes > test

#### DNS í•´ê²° ë¬¸ì œ

- CoreDNS ì„¤ì • í›„ ì¬ì‹œì‘ í•„ìˆ˜
- Harborì™€ ê°™ì€ ë‚´ë¶€ ì„œë¹„ìŠ¤ ì—°ë™ ì‹œ ë°˜ë“œì‹œ í•„ìš”

---

## ğŸ“‹ ì¤‘ìš” ì •ë³´ ëª¨ìŒ

### ì¸ì¦ ì •ë³´

```bash
# Gitea í† í°
9e65a62c74853285136ebc78520f17b2a43cdd45

# Harbor ë¡œë´‡ê³„ì •
vRXmR1iIAbCe7WteWRhc7idC4Axb05Px
```

### ë„¤íŠ¸ì›Œí¬ ì •ë³´

```bash
# ì™¸ë¶€ IP
34.47.118.180

# ë‚´ë¶€ DNS ì£¼ì†Œë“¤
Gitea: http://gitea-http.op-gitops.svc:3000/test-app/backend-gitea.git
Jenkins: http://jenkins.op-gitops.svc.cluster.local:8080/
Harbor: harbor-core.op-common.svc.cluster.local:80
```

### ì£¼ìš” ì„¤ì •ê°’

```bash
# Repository URL ì‘ì„± ì‹œ ì£¼ì˜ì‚¬í•­
# âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ:
http://gitea-http.op-gitops.svc:3000/pipeline/jenkins.git

# âŒ ì˜ëª»ëœ ì˜ˆì‹œ:
http://gitea-http.op-gitops.svc:3000/pipeline/jenkins/eris-fe/rollback/Jenkinsfile
```

### Jenkins í”ŒëŸ¬ê·¸ì¸ í•„ìˆ˜ ëª©ë¡

- `kubernetes:latest`
- `workflow-aggregator:latest`
- `git:latest`
- `configuration-as-code:latest`

### í™˜ê²½ë³€ìˆ˜ í…œí”Œë¦¿

```bash
# Docker ê´€ë ¨
DOCKER_REGISTRY_HOST=harbor.oke.com:30191
DOCKER_PROJECT_NAME=library
DOCKER_IMAGE_NAME=your-app
DOCKER_HOST=tcp://localhost:2375
DOCKER_TLS_CERTDIR=""

# Git ê´€ë ¨
GIT_URL=http://gitea-http.op-gitops.svc:3000/your-org/your-repo.git
GIT_CREDENTIALS_ID=git-credentials
GIT_BRANCH=main

# GitOps ê´€ë ¨
GITOPS_URL=http://gitea-http.op-gitops.svc:3000/your-org/gitops-repo.git
GITOPS_CREDENTIALS_ID=gitops-credentials
GITOPS_BRANCH=main
GITOPS_DIR=manifests
GITOPS_CONTAINER_NAME=your-container

# Jenkins ê´€ë ¨
JENKINS_URL=http://jenkins.op-gitops.svc.cluster.local:8080/
```

---
