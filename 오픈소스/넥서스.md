## Nexus Repositoryë€?

**ë©€í‹°í¬ë§· ì•„í‹°íŒ©íŠ¸ ì €ì¥ì†Œ** - ê°œë°œì— í•„ìš”í•œ ëª¨ë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ íŒŒì¼ì„ ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•˜ëŠ” ë„êµ¬
### ì™œ í•„ìš”í•œê°€?

```
ë¬¸ì œ: ê°œë°œìë“¤ì´ ê°ì ì™¸ë¶€ì—ì„œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‹¤ìš´ë¡œë“œ
í•´ê²°: ë‚´ë¶€ ì„œë²„ì— ëª¨ì•„ë‘ê³  í•œ ê³³ì—ì„œ ê´€ë¦¬
```
### ê¸°ë³¸ vs Nexus

```yaml
ê¸°ë³¸ ë°©ì‹:
  ê°œë°œì â†’ Maven Central (ì™¸ë¶€) â†’ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‹¤ìš´ë¡œë“œ

Nexus ë°©ì‹:
  ê°œë°œì â†’ Nexus (ë‚´ë¶€) â†’ Maven Central â†’ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‹¤ìš´ë¡œë“œ
          â†‘ ìºì‹œ/ê´€ë¦¬      â†‘ ì²« ë²ˆì§¸ë§Œ
```

## ì£¼ìš” ê¸°ëŠ¥

### 1. **í”„ë¡ì‹œ & ìºì‹±**

- ì™¸ë¶€ ì €ì¥ì†Œ(Maven Central, npm Registry)ì˜ ìºì‹œ ì—­í• 
- í•œ ë²ˆ ë‹¤ìš´ë¡œë“œí•˜ë©´ ë‚´ë¶€ì—ì„œ ì¬ì‚¬ìš©

### 2. **ë©€í‹°í¬ë§· ì§€ì›**

- Docker ì´ë¯¸ì§€
- Maven (Java)
- npm (Node.js)
- PyPI (Python)
- NuGet (.NET)
- Helm ì°¨íŠ¸

### 3. **ì‚¬ë‚´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì €ì¥**

- ë‚´ë¶€ì—ì„œ ê°œë°œí•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê³µìœ 
- íŒ€ ê°„ ì½”ë“œ ì¬ì‚¬ìš©

## ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

### **ê°œì¸/ì†Œê·œëª¨ íŒ€**

```
ì‚¬ìš© ì•ˆí•¨ (95%)
â†’ Maven Central ì§ì ‘ ì‚¬ìš©
â†’ ì„¤ì • ê°„ë‹¨, ë¹„ìš© ì—†ìŒ
```

### **ì¤‘ëŒ€í˜• ê¸°ì—…**

```
ì‚¬ìš©í•¨ (80%)
â†’ ë³´ì•ˆ ì •ì±…, ë§ë¶„ë¦¬ í™˜ê²½
â†’ ë„¤íŠ¸ì›Œí¬ íš¨ìœ¨ì„±, í†µì œ í•„ìš”
```

## ì‹¤ì œ ì„¤ì • ì˜ˆì‹œ

### **Maven ì„¤ì •**

```xml
<!-- pom.xml -->
<project>
    <!-- Repository ì„¤ì •: ì–´ë””ì„œ ê°€ì ¸ì˜¬ì§€ -->
    <repositories>
        <repository>
            <id>nexus</id>
            <url>http://nexus.company.com:8081/repository/maven-public/</url>
        </repository>
    </repositories>
    
    <!-- ì˜ì¡´ì„± ì„ ì–¸: ë¬´ì—‡ì„ ê°€ì ¸ì˜¬ì§€ -->
    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>5.3.21</version>
        </dependency>
    </dependencies>
</project>
```

### ë¹Œë“œ ì‹œ ë™ì‘

```bash
mvn clean compile
â†“
Maven: pom.xmlì—ì„œ ì˜ì¡´ì„± ëª©ë¡ í™•ì¸
â†“  
Maven: "spring-core 5.3.21ì´ í•„ìš”í•˜ë„¤"
â†“
Maven: Repository ì„¤ì • í™•ì¸ â†’ Nexus ì„œë²„ ì ‘ê·¼
â†“
Nexus: spring-core ìˆëŠ”ì§€ í™•ì¸
  - ìˆìœ¼ë©´: ë°”ë¡œ ì „ë‹¬
  - ì—†ìœ¼ë©´: Maven Centralì—ì„œ ë‹¤ìš´ë¡œë“œ í›„ ìºì‹œí•˜ê³  ì „ë‹¬
â†“
ë¹Œë“œ ì™„ë£Œ
```

## ì¥ë‹¨ì 

### **ì¥ì **

- ğŸš€ ë¹ ë¥¸ ë‹¤ìš´ë¡œë“œ (ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬)
- ğŸ”’ ë³´ì•ˆ í†µì œ (ìŠ¹ì¸ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ)
- ğŸ“¦ í†µí•© ê´€ë¦¬ (ëª¨ë“  ì•„í‹°íŒ©íŠ¸ í•œ ê³³ì—)
- ğŸ¢ ì‚¬ë‚´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê³µìœ 

### **ë‹¨ì **

- ğŸ’° ë¹„ìš© (ì„œë²„, ê´€ë¦¬ ì¸ë ¥)
- âš™ï¸ ì„¤ì • ë³µì¡ì„±
- ğŸ”§ ìœ ì§€ë³´ìˆ˜ í•„ìš”

## ê²½ìŸ ì œí’ˆ ë¹„êµ

|ì œí’ˆ|íŠ¹ì§•|ì‚¬ìš© í™˜ê²½|
|---|---|---|
|**Nexus**|ë©€í‹°í¬ë§·, ê¸°ì—…ê¸‰|ëŒ€ê¸°ì—…, CI/CD ì¤‘ì‹¬|
|**Harbor**|ì»¨í…Œì´ë„ˆ ì „ë¬¸|ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½|
|**Docker Hub**|í¼ë¸”ë¦­ í´ë¼ìš°ë“œ|ê°œì¸, ì†Œê·œëª¨|

## í•µì‹¬ í¬ì¸íŠ¸

```yaml
ì–¸ì œ ì‚¬ìš©?: 
  - ê¸°ì—… í™˜ê²½ (ë³´ì•ˆ ì •ì±…)
  - íŒ€ ê·œëª¨ í¼ (íš¨ìœ¨ì„±)
  - ë§ë¶„ë¦¬ í™˜ê²½ (ì ‘ê·¼ ì œí•œ)
  - ì‚¬ë‚´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê³µìœ 

ì™œ ì‚¬ìš©?:
  - ì˜ì¡´ì„± "ì •ë³´"ëŠ” ì½”ë“œì—, "íŒŒì¼"ì€ ë³„ë„ ê´€ë¦¬
  - ì™¸ë¶€ ì˜ì¡´ì„± ì—†ëŠ” ì•ˆì •ì  ë¹Œë“œ
  - ì¤‘ì•™ì§‘ì¤‘ì‹ ì•„í‹°íŒ©íŠ¸ ê´€ë¦¬
```

**í•œì¤„ ìš”ì•½**: ê°œë°œíŒ€ì˜ ëª¨ë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì•ˆì „í•˜ê³  íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ë‚´ë¶€ ì €ì¥ì†Œ

---
# ğŸ“ Nexus Docker Registry ìš´ì˜ ë©”ëª¨

## ğŸ¯ ëª©í‘œ

ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ Nexusë¥¼ Docker ì´ë¯¸ì§€ ì €ì¥ì†Œë¡œ ì‚¬ìš©í•˜ê³ , ê¸°ì¡´ VMì—ì„œ ê´€ë¦¬í•˜ë˜ ì´ë¯¸ì§€ë¥¼ ìƒˆ í™˜ê²½ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì´ì „í•œë‹¤.

## ğŸŸ¢ Nexus ì„¤ì¹˜ êµ¬ì¡°

### âœ… ê¸°ì¡´ VM Nexus

- íšŒì‚¬ì—ì„œ ì§ì ‘ VMì— Nexusë¥¼ ì„¤ì¹˜í•´ ìš´ì˜.
- ì ‘ì† URL:
    ```
    https://14.63.177.157:8443/
    ```
- Repositoryì— ê¸°ì¡´ Docker ì´ë¯¸ì§€ê°€ ì €ì¥ë˜ì–´ ìˆìŒ.
- ëª©ì : **ì´ ì´ë¯¸ì§€ë“¤ì„ íŒŒë“œë¡œ ë°°í¬ëœ Nexusë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜**

---

### âœ… ì¿ ë²„ë„¤í‹°ìŠ¤ Nexus

- Helm Chartë¡œ ì„¤ì¹˜
    
- ì„œë¹„ìŠ¤ ë…¸ì¶œ ë°©ì‹:
    
    - NodePort 30018 (HTTP Docker Port)
        
    - NodePort 30443 (HTTPS Docker Port)
        
    - ClusterIP 8081 (ì›¹ UI/REST API)
        
- Ingressë„ ë°°í¬ë˜ì–´ ìˆìœ¼ë‚˜ EXTERNAL-IPëŠ” ì—†ìŒ (NodePortë§Œ ë…¸ì¶œ ì¤‘)
    

---

## ğŸŸ¢ ë§ˆì´ê·¸ë ˆì´ì…˜ ëª©ì 

- ê¸°ì¡´ VM Nexusì— ì €ì¥ëœ ì´ë¯¸ì§€ ì •ë³´ë¥¼ **ì¿ ë²„ë„¤í‹°ìŠ¤ Nexusë¡œ ì´ì „**.
    
- ìƒˆ í™˜ê²½ì— ë™ì¼í•œ ì´ë¯¸ì§€ ë„¤ì„ê³¼ íƒœê·¸ë¡œ ì €ì¥.
    
- ì´í›„ êµ¬ì¶•ëœ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì¼ê´€ë˜ê²Œ Pull ê°€ëŠ¥.
    

---

## ğŸŸ¢ ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

âœ… **ê¸°ë³¸ ì›ë¦¬**

1. ê¸°ì¡´ VM Nexusì—ì„œ `docker pull`ë¡œ ì´ë¯¸ì§€ë¥¼ ë‚´ë ¤ë°›ìŒ.
    
2. ì¿ ë²„ë„¤í‹°ìŠ¤ Nexusì— `docker tag`ë¡œ ìƒˆ ê²½ë¡œë¥¼ ì§€ì •.
    
3. `docker push` ë˜ëŠ” `nerdctl push`ë¡œ ì—…ë¡œë“œ.
    

âœ… **ì£¼ì˜**

- VM NexusëŠ” HTTPS í¬íŠ¸(`8443`)ì— ì—°ê²°ë˜ì–´ì•¼ í•¨.
    
- ì¿ ë²„ë„¤í‹°ìŠ¤ NexusëŠ” NodePort ë°©ì‹(30018/30443) ë˜ëŠ” Ingress Subpathë¥¼ í†µí•´ ì ‘ì† ê°€ëŠ¥.
    

---

## ğŸŸ¢ ë§ˆì´ê·¸ë ˆì´ì…˜ ì˜ˆì œ

ì•„ë˜ëŠ” `nginx:latest`ë¥¼ VM Nexusì—ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ Nexusë¡œ ì˜®ê¸°ëŠ” ì˜ˆì‹œ.

---

### â‘  VM Nexusì—ì„œ Pull

```bash
docker login 14.63.177.157:8443
docker pull 14.63.177.157:8443/nginx:latest
```

(ë˜ëŠ” `nerdctl` ì‚¬ìš© ê°€ëŠ¥)

---

### â‘¡ ì¿ ë²„ë„¤í‹°ìŠ¤ Nexusë¡œ Tag

- NodePort(HTTP) ë°©ì‹ ì˜ˆì‹œ:
    
    ```bash
    sudo nerdctl tag 14.63.177.157:8443/nginx:latest 172.25.0.84:30018/myimage/nginx:latest
    ```
    
- Ingress ë°©ì‹ ì˜ˆì‹œ:
    
    ```bash
    sudo nerdctl tag 14.63.177.157:8443/nginx:latest repository.dev.eris.go.kr/my-docker-image/nginx:latest
    ```
    

---

### â‘¢ Push

- NodePort(HTTP) ë°©ì‹:
    
    ```bash
    sudo nerdctl --plain-http push 172.25.0.84:30018/myimage/nginx:latest
    ```
    
- Ingress Subpath ë°©ì‹:
    
    ```bash
    sudo nerdctl push repository.dev.eris.go.kr/my-docker-image/nginx:latest
    ```
    

---

âœ… ë§ˆì´ê·¸ë ˆì´ì…˜ ëŒ€ìƒ ì´ë¯¸ì§€:

- `quay.io/jaegertracing/jaeger-operator:1.65.0`
    
- `gcr.io/kubebuilder/kube-rbac-proxy:v0.13.1`
    
- `jaegertracing/jaeger-agent:1.62.0`
    
- `jaegertracing/jaeger-collector:1.65.0`
    
- `jaegertracing/jaeger-es-index-cleaner:1.65.0`
    
- `jaegertracing/jaeger-query:1.65.0`
    
- `docker.elastic.co/elasticsearch/elasticsearch:8.12.2`
    

ëª¨ë‘ ë™ì¼ ë°©ì‹ìœ¼ë¡œ Tag ë° Push.

---

## ğŸŸ¢ Repository êµ¬ë¶„ ë°©ì‹

**NodePort ë°©ì‹**

- RepositoryëŠ” ê³ ì • (`okestro-docker`)
    
- ì´ë¯¸ì§€ ê²½ë¡œëŠ” ë‹¨ìˆœ Prefix êµ¬ë¶„  
    ì˜ˆ: `myimage/nginx:latest`
    

**Ingress Subpath ë°©ì‹**

- Repositoryë¥¼ URLë¡œ êµ¬ë¶„  
    ì˜ˆ: `my-docker-image/nginx:latest`
    
- ë‹¤ì–‘í•œ Repositoryì— ì €ì¥ ê°€ëŠ¥
    

---

## ğŸŸ¢ DNSì™€ /etc/hosts ì£¼ì˜ì‚¬í•­

âœ… Subpath ë°©ì‹ ì‚¬ìš© ì‹œ:

```
/etc/hosts:
172.25.0.96 repository.dev.eris.go.kr
```

(Ingress Node IP)

âœ… NodePort ë°©ì‹ ì‚¬ìš© ì‹œ:

```
/etc/hosts:
172.25.0.84 repository.dev.eris.go.kr
```

(ë§ˆìŠ¤í„°ë…¸ë“œ IP)

---

## ğŸŸ¢ ì¸ì¦ì„œ ë° ë³´ì•ˆ

- VM Nexus: ìì²´ ì„œëª… ì¸ì¦ì„œ ì‚¬ìš©
    
- ì¿ ë²„ë„¤í‹°ìŠ¤ Nexus: ê¸°ë³¸ ì¸ì¦ì„œ
    
- NodePort HTTP ì‚¬ìš© ì‹œ `--plain-http` í•„ìš”
    
- HTTPS ì‚¬ìš© ì‹œ `insecure-registries` ì„¤ì • í•„ìš”
    

ì˜ˆì‹œ:

```json
{
  "insecure-registries": ["repository.dev.eris.go.kr"]
}
```

Docker ì¬ì‹œì‘ í›„ ì ìš©.

---

## ğŸŸ¢ ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œì™€ ëŒ€ì‘

âœ… HTTP/HTTPS í˜¼ë™

- `http: server gave HTTP response to HTTPS client`  
    â†’ `--plain-http` ì˜µì…˜ í•„ìš”
    

âœ… Subpathê°€ ì•ˆë¨

- DNS ë˜ëŠ” `/etc/hosts`ê°€ NodePortë¡œ ì—°ê²°ë¨
    
- ë°˜ë“œì‹œ Ingress Nodeë‚˜ LoadBalancerì— ì—°ê²°í•´ì•¼ Subpath ì •ìƒ ë™ì‘
    

âœ… ì¸ì¦ì„œ CN/SAN ë¬¸ì œ

- `x509: certificate signed by unknown authority`  
    â†’ `insecure-registries` ë“±ë¡ ë˜ëŠ” `--tls-verify=false`
    

---

## ğŸŸ¢ ìš´ì˜ ê¶Œì¥ì‚¬í•­

- í…ŒìŠ¤íŠ¸ í™˜ê²½: NodePort + `--plain-http`
    
- ìš´ì˜ í™˜ê²½: Ingress + LoadBalancer + Subpath
    
- ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ í›„ VM NexusëŠ” `Read-Only`ë¡œ ë‘ì–´ ë°ì´í„° ë³´ì¡´
    

---

í•„ìš”í•˜ì‹œë©´ ì´ ë¬¸ì„œì— ì˜ˆì œ ë” ì¶”ê°€í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ğŸš€âœ¨