1. 트럼본 개요
프로젝트 -> 요구사항 등록 -> 운영환경에 반영하는 워크플로우
티켓을 기반으로 해서 변경관리에 대한 플로우를 수행함

2. 메뉴 구조도
트럼본에서 사용하는 미들웨어: 젠킨스, 깃랩, 하버, 아르고CD, 넥서스
해당 미들웨어가 등록이 되어 있어야 트럼본 사용 가능
트럼본은 권한 관리가 어려움
사용자 모드, 관리자 모드 이 두 모드에 접근할 수 있는 권한을 각각 만들어야 함
업무코드 등록부터 시작(깃랩과 매핑) -> 깃랩에 업무코드와 동일한 이름의 저장소(그룹)이 생성됨
예를 들어 트럼본 저장소 그룹에 긴급신고 프로젝트를 관리하려면 프로젝트 생성, 사용자 맵핑 필요
정적분석, junit 테스트를 수행하려면 시작 전에 빌드 이미지(하버에 있는 베이스 이미지)를 먼저 세팅해야함
각 업무코드의 저장소에 파이프라인 관리에 저장소(dev, stg, prd)가 자동으로 생성됨
stg, prdsms 워크플로우에서만 실행, dev의 경우 파이프라인 관리에서 상시 실행 가능
피처브랜치가 있어야 하며 이 피처브랜치를 통해서 각각 merge해줘야함
한 브랜치 당 하나의 파이프라인 매핑 필요(여러개는 x)
워크플로우 컴포넌트(변경관리 흐름을 만들 수 있는 기능)

3. 주요기능 개념구성
업무코드는 트럼본 기초 데이터 생성에 기준이 되는 값: 개별 사용자에게 맵핑
승인 워크플로우를 만들 때 해당 업무코드에 속한 담당자한테만 결재 요청이 감
티켓도 해당 업무코드에 속한 티켓을 생성할 수 있으며, 한번 생성이 되면 삭제/수정 불가능
사용자 역할에서도 승인 매핑이 필요함

파이프라인 생성 순서:
업무코드 매핑 -> 깃 레포지토리 선택 -> 빌드 및 배포 스크립트 작성 -> 배포 환경 -> 환경변수

정적분석, 단위테스트는(stg 브랜치에서만)
예약 파이프라인은 prd만
코드 병합은 피처 -> 스테이징 -> prd

원복 워크플로우는 코드 병합 취소라는 컴포넌트(머지 해제)를 선택해야 함, 그리고 파이프라인을 중간에 넣어서 코드 병합 취소해야함(코병취stg -> stg 파이프라인 -> 코병취prd -> prd 파이프라인)

취소하면 파이프라인 이력은 돌아가지 않고 형상만 돌아감(결제 전 단계까지 가서 결제를 다시 받아야함)
초기화 시 워크플로우의 첫번째 단계로 돌아감

qa, aa

sm형태로 관리


계정: 깃랩은 아이디가 root, 넥서스 등 나머지는 admin, 하버 트럼본은 비밀번호가 cloud1234#

롤백, 긴급은 stg, prd만

업무코드 발급: 코드관리 -> 업무코드
업무코드는 ERIS 사용, 업무코드가 있으면 빌드배포 -> 툴체인 관리 -> 툴체인관리 목록에서 ERIS 선택(업무코드 만들고 툴체인과 매핑을 해야 깃랩에 저장소 생성할 수 있음)

그룹 및 저장소 관리 -> 그룹 및 저장소 목록에서 깃랩과 매핑

깃랩은 dev를 기반으로 피처 브랜치를 만들어서 merge해서 작업하는 방식

저장소까지 매핑해야 사용자가 깃랩 비밀번호를 수정할 수 있음

maven이나 gradle 이미지는 하버에 직접 넣어줘야 함